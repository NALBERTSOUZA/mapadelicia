<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Mapa Simples</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f6fb;
}

header{
  height:60px;
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 20px;
  border-bottom:1px solid #ddd;
}

.actions{
  display:flex;
  align-items:center;
  gap:12px;
}

.toggle{
  width:60px;
  height:30px;
  background:#dc2626;
  border-radius:30px;
  position:relative;
  cursor:pointer;
}

.toggle::after{
  content:'';
  width:24px;
  height:24px;
  background:#fff;
  border-radius:50%;
  position:absolute;
  top:3px;
  left:33px;
  transition:.2s;
}

.toggle.on{
  background:#16a34a;
}

.toggle.on::after{
  left:3px;
}

#btnAdd{
  padding:8px 14px;
  border:none;
  border-radius:6px;
  background:#111827;
  color:#fff;
  font-weight:600;
  cursor:pointer;
}

#canvas{
  position:relative;
  height:calc(100vh - 60px);
}

.mesa{
  width:100px;
  height:100px;
  background:#e5e7eb;
  border:3px solid #9ca3af;
  border-radius:50%;
  position:absolute;
  cursor:grab;
}
</style>
</head>

<body>

<header>
  <strong id="label">Editar</strong>

  <div class="actions">
    <button id="btnAdd">+ Mesa</button>
    <div id="toggle" class="toggle"></div>
  </div>
</header>

<div id="canvas"></div>

<script>
let modoEditar = true;

const toggle = document.getElementById('toggle');
const label = document.getElementById('label');
const btnAdd = document.getElementById('btnAdd');
const canvas = document.getElementById('canvas');

/* SWITCH */
toggle.onclick = () => {
  modoEditar = !modoEditar;
  toggle.classList.toggle('on', modoEditar);
  label.innerText = modoEditar ? 'Editar' : 'Ao vivo';
  btnAdd.style.display = modoEditar ? 'inline-block' : 'none';
};

/* ADD MESA */
btnAdd.onclick = () => {
  if(!modoEditar) return;

  const mesa = document.createElement('div');
  mesa.className = 'mesa';
  mesa.style.left = Math.random() * 400 + 'px';
  mesa.style.top = Math.random() * 300 + 'px';

  habilitarDrag(mesa);
  canvas.appendChild(mesa);
};

/* DRAG */
function habilitarDrag(el){
  let movendo = false;
  let ox = 0, oy = 0;

  el.addEventListener('mousedown', e => {
    if(!modoEditar) return;
    movendo = true;
    ox = e.offsetX;
    oy = e.offsetY;
  });

  document.addEventListener('mousemove', e => {
    if(!movendo) return;
    el.style.left = (e.pageX - ox) + 'px';
    el.style.top = (e.pageY - oy - 60) + 'px';
  });

  document.addEventListener('mouseup', () => {
    movendo = false;
  });
}

/* estado inicial */
btnAdd.style.display = 'inline-block';
toggle.classList.add('on');
</script>

</body>
</html>
