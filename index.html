<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Mapa de Mesas ‚Ä¢ Restaurante</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#f4f6f8;
  --primary:#2563eb;
  --border:#dcdfe4;
  --green:#16a34a;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter, Arial, sans-serif;
  background:var(--bg);
  display:flex;
  height:100vh;
}

/* SIDEBAR */
aside{
  width:300px;
  background:#0f172a;
  color:#fff;
  padding:20px;
  overflow-y:auto;
}

button{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border:none;
  border-radius:6px;
  background:var(--primary);
  color:#fff;
  cursor:pointer;
  font-weight:600;
}

button.secondary{background:#334155}

input{
  width:100%;
  padding:8px;
  margin-bottom:10px;
}

/* ELEMENTOS */
.elementos{
  display:flex;
  flex-direction:column;
  gap:12px;
}

.elemento{
  background:#020617;
  border:1px dashed #475569;
  border-radius:8px;
  cursor:grab;
  overflow:hidden;
  height:110px;
  position:relative;
}

.elemento span{
  position:absolute;
  bottom:4px;
  left:6px;
  right:6px;
  font-size:11px;
  background:rgba(0,0,0,.6);
  padding:3px 6px;
  border-radius:4px;
}

.elemento img{
  width:100%;
  height:100%;
  object-fit:cover;
  pointer-events:none;
}

/* MAPA */
main{flex:1;padding:20px}

#mapa{
  position:relative;
  background:#fff;
  border:2px dashed var(--border);
  height:100%;
  border-radius:12px;
  overflow:hidden;
}

/* MESA / ELEMENTO NO MAPA */
.mesa-wrapper{
  position:absolute;
  cursor:grab;
}

.mesa{
  background:#e5e7eb;
  border:2px solid #9ca3af;
  padding:6px;
  min-width:60px;
  min-height:60px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:12px;
  font-weight:600;
}

.mesa.reservada{
  background:var(--green);
  color:#fff;
}

.selected .mesa{
  border-color:var(--primary);
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.4);
  display:none;
  align-items:center;
  justify-content:center;
}
.modal.active{display:flex}

.modal-box{
  background:#fff;
  padding:20px;
  width:320px;
  border-radius:10px;
}

.modal-box label{
  font-size:13px;
  margin-top:10px;
  display:block;
}

.modal-box input{
  width:100%;
  padding:8px;
  margin-top:4px;
}

.modal-actions{
  margin-top:15px;
  display:flex;
  gap:10px;
}
</style>
</head>

<body>

<aside>
  <h2>Elementos do Restaurante</h2>

  <button class="secondary" onclick="removerMesa()">üóëÔ∏è Remover Selecionado</button>

  <label>Adicionar novo elemento (URL)</label>
  <input id="urlElemento" placeholder="https://imagem-ou-card...">
  <button onclick="adicionarElemento()">Adicionar</button>

  <div class="elementos" id="listaElementos"></div>
</aside>

<main>
  <div id="mapa"></div>
</main>

<!-- MODAL RESERVA -->
<div class="modal" id="modalReserva">
  <div class="modal-box">
    <h3>Reserva</h3>

    <label>Cliente</label>
    <input id="clienteNome">

    <label>Telefone</label>
    <input id="clienteTelefone">

    <div class="modal-actions">
      <button onclick="salvarReserva()">Salvar</button>
      <button class="secondary" onclick="fecharReserva()">Cancelar</button>
    </div>
  </div>
</div>

<script>
const mapa = document.getElementById('mapa')
const lista = document.getElementById('listaElementos')
let selecionada = null

/* ===== ELEMENTOS PADR√ÉO (URLs P√öBLICAS) ===== */
const elementosPadrao = [
  { nome:'Mesa Quadrada', url:'https://images.unsplash.com/photo-1600891964599-f61ba0e24092' },
  { nome:'Mesa Retangular', url:'https://images.unsplash.com/photo-1555396273-367ea4eb4db5' },
  { nome:'Mesa Redonda', url:'https://images.unsplash.com/photo-1544148103-0773bf10d330' },
  { nome:'Cadeiras', url:'https://images.unsplash.com/photo-1582582621959-48d27397dc69' },
  { nome:'√Årea do Restaurante', url:'https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c' },
  { nome:'Divis√≥ria / Parede', url:'https://images.unsplash.com/photo-1618213839348-1c99c34f3a1d' }
]

elementosPadrao.forEach(e=>criarElemento(e.url,e.nome))

/* ===== CRIAR ELEMENTO ===== */
function criarElemento(url,nome){
  const el = document.createElement('div')
  el.className='elemento'
  el.draggable=true
  el.dataset.url=url
  el.innerHTML = `
    <img src="${url}">
    <span>${nome}</span>
  `
  el.ondragstart = ev => {
    ev.dataTransfer.setData('url', url)
  }
  lista.appendChild(el)
}

function adicionarElemento(){
  const url=urlElemento.value.trim()
  if(!url) return
  criarElemento(url,'Elemento Custom')
  urlElemento.value=''
}

/* ===== DROP NO MAPA ===== */
mapa.ondragover = e => e.preventDefault()
mapa.ondrop = e => {
  e.preventDefault()
  const url = e.dataTransfer.getData('url')
  criarMesa(url, e.offsetX, e.offsetY)
}

/* ===== CRIAR NO MAPA ===== */
function criarMesa(url,x,y){
  const wrap=document.createElement('div')
  wrap.className='mesa-wrapper'
  wrap.style.left=x+'px'
  wrap.style.top=y+'px'

  const mesa=document.createElement('div')
  mesa.className='mesa'
  mesa.textContent='Mesa'

  wrap.appendChild(mesa)
  mapa.appendChild(wrap)
  ativarMesa(wrap,mesa)
  drag(wrap)
}

/* ===== RESERVA INDIVIDUAL ===== */
function ativarMesa(wrap,mesa){
  wrap.onclick=()=>{
    document.querySelectorAll('.mesa-wrapper').forEach(m=>m.classList.remove('selected'))
    wrap.classList.add('selected')
    selecionada=wrap
  }

  wrap.ondblclick=()=>{
    clienteNome.value = wrap.dataset.cliente || ''
    clienteTelefone.value = wrap.dataset.telefone || ''
    modalReserva.classList.add('active')
  }

  wrap.mesa=mesa
}

function salvarReserva(){
  if(!selecionada) return
  selecionada.dataset.cliente = clienteNome.value
  selecionada.dataset.telefone = clienteTelefone.value
  selecionada.mesa.classList.add('reservada')
  selecionada.mesa.textContent = clienteNome.value || 'Reservado'
  modalReserva.classList.remove('active')
}

function fecharReserva(){
  modalReserva.classList.remove('active')
}

/* ===== REMOVER ===== */
function removerMesa(){
  if(selecionada){
    selecionada.remove()
    selecionada=null
  }
}

/* ===== DRAG ===== */
function drag(el){
  let x=0,y=0
  el.onmousedown=e=>{
    x=e.clientX;y=e.clientY
    document.onmousemove=ev=>{
      el.style.left=el.offsetLeft+(ev.clientX-x)+'px'
      el.style.top =el.offsetTop +(ev.clientY-y)+'px'
      x=ev.clientX;y=ev.clientY
    }
    document.onmouseup=()=>document.onmousemove=null
  }
}
</script>

</body>
</html>
