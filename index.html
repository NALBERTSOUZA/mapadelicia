<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Mapa Simples</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f6fb;
}

header{
  height:60px;
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 20px;
  border-bottom:1px solid #ddd;
}

.toggle{
  width:60px;
  height:30px;
  background:#dc2626;
  border-radius:30px;
  position:relative;
  cursor:pointer;
}

.toggle::after{
  content:'';
  width:24px;
  height:24px;
  background:#fff;
  border-radius:50%;
  position:absolute;
  top:3px;
  left:33px;
  transition:.2s;
}

.toggle.on{
  background:#16a34a;
}

.toggle.on::after{
  left:3px;
}

#canvas{
  position:relative;
  height:calc(100vh - 60px);
}

.mesa{
  width:100px;
  height:100px;
  background:#e5e7eb;
  border:3px solid #9ca3af;
  border-radius:50%;
  position:absolute;
  left:200px;
  top:150px;
  cursor:grab;
}
</style>
</head>

<body>

<header>
  <strong id="label">Editar</strong>
  <div id="toggle" class="toggle"></div>
</header>

<div id="canvas">
  <div id="mesa" class="mesa"></div>
</div>

<script>
let modoEditar = true;

const toggle = document.getElementById('toggle');
const label = document.getElementById('label');
const mesa = document.getElementById('mesa');

/* SWITCH */
toggle.onclick = () => {
  modoEditar = !modoEditar;
  toggle.classList.toggle('on', modoEditar);
  label.innerText = modoEditar ? 'Editar' : 'Ao vivo';
};

/* DRAG */
let movendo = false;
let ox = 0, oy = 0;

mesa.addEventListener('mousedown', e => {
  if(!modoEditar) return; // ðŸ”’ FLAG FUNCIONA AQUI
  movendo = true;
  ox = e.offsetX;
  oy = e.offsetY;
});

document.addEventListener('mousemove', e => {
  if(!movendo) return;
  mesa.style.left = (e.pageX - ox) + 'px';
  mesa.style.top = (e.pageY - oy - 60) + 'px';
});

document.addEventListener('mouseup', () => {
  movendo = false;
});
</script>

</body>
</html>
